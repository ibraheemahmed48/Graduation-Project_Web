import 'dart:typed_data';import 'package:file_picker/file_picker.dart';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:get/get_rx/src/rx_types/rx_types.dart';import '../../help/Colors.dart';import '../../help/text_style.dart';import '../FirstPage/First_page_large.dart';import '../FirstPage/First_page_small.dart';import '../FirstPage/Home_Button_small.dart';import '../Signin_page/TextField_1.dart';import 'Send_news_TextField.dart';import 'dart:html' as html;import 'package:http_parser/http_parser.dart';import 'dart:convert';import 'package:http/http.dart' as http;class Send_news_main_page extends StatefulWidget {  const Send_news_main_page({Key? key}) : super(key: key);  @override  State<Send_news_main_page> createState() => _Send_news_main_pageState();}bool isValid = false;class _Send_news_main_pageState extends State<Send_news_main_page> {  List<int>? _selectedFile;  Uint8List? _bytesData;  upLodeFile() async {    html.FileUploadInputElement uplodeInput = html.FileUploadInputElement();    uplodeInput.multiple = true;    uplodeInput.draggable = true;    uplodeInput.click();    uplodeInput.onChange.listen((event) {      final files = uplodeInput.files;      final file = files![0];      final reader = html.FileReader();      reader.onLoadEnd.listen((event) {        setState(() {          _bytesData =              Base64Decoder().convert(reader.result.toString().split(",").last);        });      });      reader.readAsDataUrl(file);    });  }  @override  final TextEditingController news = TextEditingController(text: "");  RxBool swich = true.obs;  static final RxString typed_news = ''.obs;  RxList stages = ["الاولى", "الثانية ", "الثالثة", "الرابعة"].obs;  RxBool changecolor = true.obs;  Widget build(BuildContext context) {    return Scaffold(      backgroundColor: Colorsapp.mainColor,      body: Stack(        children: [          if (MediaQuery.of(context).size.longestSide > 1000)            Container(              height: MediaQuery.of(context).size.height,              width: MediaQuery.of(context).size.width,              decoration: const BoxDecoration(                image: DecorationImage(                    image: AssetImage("photo/Webpage2.png"), fit: BoxFit.cover),              ),            ),          Row(            mainAxisAlignment: MainAxisAlignment.spaceBetween,            children: [              Padding(                padding: const EdgeInsets.only(left: 80),                child: Column(                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,                  children: [                    Text(                      "ارسال خبر",                      style: Text_Style.getstyle(                          fontsize:                              MediaQuery.of(context).size.longestSide / 30,                          ColorText: Colorsapp.mainColor,                          fontWeight: FontWeight.w700),                    ),                    Send_news_TextField(news: news),                    Container(                      width: MediaQuery.of(context).size.width / 7,                      height: MediaQuery.of(context).size.height / 12,                      child: ElevatedButton(                        style: ElevatedButton.styleFrom(                          backgroundColor: Colorsapp.mainColor,                          shape: RoundedRectangleBorder(                              borderRadius: BorderRadius.circular(18)),                        ),                        onPressed: () async {                          upLodeFile();                        },                        child: Text(                          "ارفاق صورة",                          style: Text_Style.getstyle(                              fontsize:                                  MediaQuery.of(context).size.longestSide / 70,                              ColorText: Colorsapp.White,                              fontWeight: FontWeight.w700),                        ),                      ),                    ),                    _bytesData != null                        ? ClipRRect(                            borderRadius: BorderRadius.circular(8.0),                            child: Image.memory(                              _bytesData!,                              width: 150,                              height: 100,                            ),                          )                        : Container(),                    Text(                      "اختيار المرحلة الدراسية ",                      style: Text_Style.getstyle(                          fontsize:                              MediaQuery.of(context).size.longestSide / 40,                          ColorText: Colorsapp.mainColor,                          fontWeight: FontWeight.w700),                    ),                      Button_stages(                        changecolor: changecolor,                        onPressed: () {                          setState(() {});                          if (changecolor == true.obs) {                            changecolor = false.obs;                          } else {                            changecolor = true.obs;                          }                        },                        text: stages[1],                      ),                    Container(                      width: 50,                      height: 50,                      color: Colors.lightBlueAccent,                      child: ElevatedButton(                        onPressed: () async {                          print(_bytesData);                        },                        child: Text("sssssssssssss"),                      ),                    ),                  ],                ),              ),              if (MediaQuery.of(context).size.longestSide > 1000)                Image.asset(                  "photo/1111.png",                  width: MediaQuery.of(context).size.longestSide / 2.5,                  height: MediaQuery.of(context).size.longestSide / 2.5,                ),            ],          )        ],      ),    );  }}class Button_stages extends StatelessWidget {  const Button_stages({    Key? key,    required this.changecolor,    required this.onPressed,    required this.text,  }) : super(key: key);  final RxBool changecolor;  final void Function() onPressed;  final String text;  @override  Widget build(BuildContext context) {    return Container(        width: MediaQuery.of(context).size.width / 9,        height: MediaQuery.of(context).size.height / 12,        child: ElevatedButton(          style: ElevatedButton.styleFrom(            backgroundColor: changecolor.value == true                ? Colorsapp.SecondColor                : Colorsapp.TextColor,            shape:                RoundedRectangleBorder(borderRadius: BorderRadius.circular(18)),          ),          onPressed: () {            onPressed();          },          child: Text(            text,            style: Text_Style.getstyle(                fontsize: MediaQuery.of(context).size.longestSide / 70,                ColorText: Colorsapp.White,                fontWeight: FontWeight.w700),          ),        ));  }}